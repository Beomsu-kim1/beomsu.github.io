---
title: "Project Gutenberg"
author: "BEOM SU KIM"
format: html
editor: visual
---

## What is Project Gutenberg?

Project Gutenberg is the oldest digital library, founded in 1971 by Michael Hart to digitize and archive cultural works, particularly public-domain books, to encourage eBook creation and distribution. It is a volunteer-driven nonprofit organization offering over 75,000 free eBooks in various formats, available for download or online reading. The collection focuses on older works whose U.S. copyright has expired, and the project's mission is to make literature freely accessible to everyone.

## How to use gutenbergr

You can visit gutenberg.org to find out the author ID or the gutenberg id for a specific title.

```{r gutenbergr}

library(gutenbergr)

gutenberg_works()

colnames(gutenberg_works())

```

## Download a book of your choice

```{r examples}

# You can search for a specific author by looking up the author ID on the Project Gutenberg site. 

austen <- gutenberg_works(gutenberg_author_id == 68)

# Once you identify the gutenberg id of a certain title, you can download the title.

pride <- gutenberg_download(gutenberg_id = 1342)
```

## Download Mary Shelley's Frankenstein

```{r}
library(dplyr)
library(stringr)
library(gutenbergr)

frankenstein0 <- gutenberg_download(gutenberg_id = 84)

frankenstein1 <- frankenstein0 %>%
  filter(!str_detect(text, "^\\s*$"))

head(frankenstein1)

```

```{r frankenstein}
frankenstein0 <- gutenberg_download(gutenberg_id = 84)

# Can you clean up frankenstein0 so no blank lines remain and save it as frankenstein1?




# Can you clean up frankenstein1 so the book title, author name, and the table of contents are removed from the file? Save the results as frankenstein2.
start_line_index <- which(str_detect(frankenstein1$text, "^\\s*Letter 1\\s*$"))[1]

if (!is.na(start_line_index)) {
  # 'Letter 1' 줄부터 끝까지 선택
  frankenstein2 <- frankenstein1 %>%
    slice(start_line_index:n())
} else {
  frankenstein2 <- frankenstein1
  warning("Warning: 'Letter 1' not found, frankenstein2 is the same as frankenstein1.")
}


```

## Download a book (or books) of your choice.

```{r download}

library(tidyverse)
library(tidytext)
library(gutenbergr)

austen <- gutenberg_works(gutenberg_author_id == 68)
book <- gutenberg_download(158)


```

## Clean up the text data

```{r cleanup}
library(dplyr)
library(stringr)

austen <- gutenberg_works(gutenberg_author_id == 68)

emma0 <- gutenberg_download(gutenberg_id = 158)

emma1 <- emma0 %>%
  filter(!str_detect(text, "^\\s*$"))



# 1. 빈 줄 제거 (클린업 시작)
emma1 <- emma0 %>%
  filter(!str_detect(text, "^\\s*$"))

# 2. 텍스트 소문자 변환 + 구두점 제거 + 여러 공백 하나로 정리
emma_clean <- emma1 %>%
  mutate(text = tolower(text)) %>%
  mutate(text = str_replace_all(text, "[[:punct:]]", " ")) %>%
  mutate(text = str_replace_all(text, "\\s+", " "))

# 3. 모든 텍스트를 한 문장으로 합치기
emma_text <- paste(emma_clean$text, collapse = " ")
```

## Generate sentences using an N-gram model

```{r ngram}

library(ngram)

emma_ngram <- ngram(emma_text)
babble(ng = emma_ngram, genlen = 50)
```
